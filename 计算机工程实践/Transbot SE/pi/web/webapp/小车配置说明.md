# å°è½¦é…é€çŠ¶æ€ä¸Šä¼ é…ç½®è¯´æ˜

## ğŸ“‹ æ¦‚è¿°

è¿™æ˜¯ä¼˜åŒ–ç‰ˆçš„å°è½¦é…é€çŠ¶æ€ä¸Šä¼ è„šæœ¬ï¼Œç›¸æ¯”åŸç‰ˆæœ¬å¢åŠ äº†é‡è¯•æœºåˆ¶ã€æ›´å¥½çš„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•åŠŸèƒ½ã€‚

## ğŸ”§ å¿…é¡»ä¿®æ”¹çš„å‚æ•°

### 1. æœåŠ¡å™¨IPåœ°å€
**æ–‡ä»¶ä½ç½®**: `robot_status_uploader.py` ç¬¬26è¡Œ
```python
self.server_ip = "192.168.144.121"  # ğŸ”§ è¯·æ ¹æ®å®é™…æœåŠ¡å™¨IPä¿®æ”¹
```
**è¯´æ˜**: è¯·å°†æ­¤IPåœ°å€ä¿®æ”¹ä¸ºæ‚¨çš„WebæœåŠ¡å™¨å®é™…IPåœ°å€

### 2. æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æœéœ€è¦ï¼‰
**æ–‡ä»¶ä½ç½®**: `robot_status_uploader.py` ç¬¬22-23è¡Œ
```python
self.a_b_c_file = "/home/pi/src/transbot_ws/src/transbot_composite_app/temp_in/a_b_c.txt"
self.end_file = "/home/pi/src/transbot_ws/src/transbot_composite_app/temp/end.txt"
```
**è¯´æ˜**: å¦‚æœå°è½¦ç«¯çš„æ–‡ä»¶è·¯å¾„ä¸æ­¤ä¸åŒï¼Œè¯·ä¿®æ”¹ä¸ºå®é™…è·¯å¾„

## âš™ï¸ å¯é€‰ä¿®æ”¹çš„å‚æ•°

### 3. æœºå™¨äººID
**æ–‡ä»¶ä½ç½®**: `robot_status_uploader.py` ç¬¬34è¡Œ
```python
self.robot_id = "transbot_01"
```
**è¯´æ˜**: å¦‚æœæ‚¨æœ‰å¤šä¸ªæœºå™¨äººï¼Œå¯ä»¥ä¿®æ”¹ä¸ºä¸åŒçš„IDä»¥ä¾¿åŒºåˆ†

### 4. é‡è¯•é…ç½®
**æ–‡ä»¶ä½ç½®**: `robot_status_uploader.py` ç¬¬30-32è¡Œ
```python
self.max_retries = 3        # æœ€å¤§é‡è¯•æ¬¡æ•°
self.retry_delay = 2        # é‡è¯•é—´éš”ï¼ˆç§’ï¼‰
self.timeout = 10           # è¯·æ±‚è¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
```

## ğŸ“Š çŠ¶æ€ç è¯´æ˜

| çŠ¶æ€ç  | å«ä¹‰ | æœåŠ¡å™¨ç«¯å¤„ç† |
|--------|------|-------------|
| 0 | æ­£åœ¨æ‹¾å– | è®¢å•ä»"å¾…å–"ç§»åŠ¨åˆ°"æ­£åœ¨å–é¤" |
| 1 | å·²æ‹¾å– | è®¢å•ä»"æ­£åœ¨å–é¤"ç§»åŠ¨åˆ°"å·²å–é¤" |
| 2 | å·²é€è¾¾ | è®¢å•ä»"å·²å–é¤"ç§»åŠ¨åˆ°"å·²é€è¾¾" |

## ğŸ½ï¸ é¤å“ç¼–å·æ˜ å°„

| é¤å“ç¼–å· | è®¢å•ID | é¤å“åç§° | é€è¾¾åœ°ç‚¹ |
|----------|--------|----------|----------|
| A | 15701809 | è¾£æ¤’ç‚’è‚‰ | Aæ¥¼ |
| B | 50924357 | é»„ç„–é¸¡ç±³é¥­ | Bæ¥¼ |
| C | 11642704 | è‚¯å¾·åŸº | Cæ¥¼ |

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### ç›´æ¥è¿è¡Œ
```bash
python3 robot_status_uploader.py
```

### ä½œä¸ºæ¨¡å—å¯¼å…¥
```python
from robot_status_uploader import StatusUploader

uploader = StatusUploader()
success = uploader.run_upload()
```

### å®šæ—¶ä»»åŠ¡
```bash
# æ·»åŠ åˆ°crontabï¼Œæ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
* * * * * /usr/bin/python3 /path/to/robot_status_uploader.py
```

## ğŸ“ æ—¥å¿—æ–‡ä»¶

è„šæœ¬ä¼šç”Ÿæˆä»¥ä¸‹æ–‡ä»¶ï¼š
- `upload_status.log` - è¯¦ç»†çš„è¿è¡Œæ—¥å¿—
- `upload_records.json` - æˆåŠŸä¸Šä¼ çš„è®°å½•ï¼ˆæœ€å¤šä¿ç•™100æ¡ï¼‰

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é”™è¯¯åŠè§£å†³æ–¹æ¡ˆ

#### 1. è¿æ¥é”™è¯¯
**é”™è¯¯**: `âŒ è¿æ¥é”™è¯¯: æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨`
**è§£å†³**: 
- æ£€æŸ¥æœåŠ¡å™¨IPåœ°å€æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æœåŠ¡å™¨æ­£åœ¨è¿è¡Œï¼ˆç«¯å£5000ï¼‰
- æ£€æŸ¥ç½‘ç»œè¿æ¥

#### 2. è¶…æ—¶é”™è¯¯
**é”™è¯¯**: `âŒ ä¸Šä¼ è¶…æ—¶`
**è§£å†³**: 
- å¢åŠ  `timeout` å‚æ•°å€¼
- æ£€æŸ¥ç½‘ç»œå»¶è¿Ÿ

#### 3. æ–‡ä»¶è¯»å–é”™è¯¯
**é”™è¯¯**: `è¯»å–é¤å“ç¼–å·æ—¶å‘ç”Ÿé”™è¯¯`
**è§£å†³**: 
- æ£€æŸ¥æ–‡ä»¶è·¯å¾„æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æ–‡ä»¶æƒé™

## ğŸ§ª æµ‹è¯•éªŒè¯

### æ‰‹åŠ¨æµ‹è¯•æ­¥éª¤
1. ç¡®ä¿WebæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
2. åœ¨å°è½¦ç«¯åˆ›å»ºæµ‹è¯•æ–‡ä»¶ï¼š
   ```bash
   echo "a" > /path/to/a_b_c.txt
   echo "0" > /path/to/end.txt
   ```
3. è¿è¡Œä¸Šä¼ è„šæœ¬
4. æŸ¥çœ‹Webç•Œé¢ç¡®è®¤çŠ¶æ€æ›´æ–°

### APIæµ‹è¯•
å¯ä»¥ä½¿ç”¨curlå‘½ä»¤æµ‹è¯•APIï¼š
```bash
curl -X POST http://YOUR_SERVER_IP:5000/api/delivery_status \
  -H "Content-Type: application/json" \
  -d '{
    "food_item": "A",
    "status_code": "0",
    "robot_id": "test_robot"
  }'
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. `upload_status.log` æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯
2. WebæœåŠ¡å™¨çš„æ—¥å¿—
3. ç½‘ç»œè¿æ¥çŠ¶æ€

---

**ç‰ˆæœ¬**: v2.0  
**æœ€åæ›´æ–°**: 2025-06-30  
**å…¼å®¹æ€§**: æ”¯æŒWebæœåŠ¡å™¨API v1.0+ 