CODE SEGMENT
ASSUME CS:CODE
START: CALL SYSINTI
MOV DX,0F043H
MOV AL,076H
OUT DX,AL
TIME: MOV DX,0F041H
MOV AL,0E8H
OUT DX,AL
MOV DX,0F041H
MOV AL,03H
OUT DX,AL
CALL DELAY1
MOV DX,0600H
IN AL,DX
CALL DSPY
CALL DELAY2
JMP TIME
SYSINTI:MOV AX,8000H
OUT 23H,AL
XCHG AL,AH
OUT 22H,AL
OUT 22H,AX
MOV DX,0F822H
MOV AL,70H
OUT DX,AL
MOV DX,0F824H
MOV AL,0B2H
OUT DX,AL
MOV DX,0F832H
MOV AL,0AH
OUT DX,AL
MOV DX,0F834H
MOV AL,15H
OUT DX,AL
MOV AL,11H
OUT 20H,AL
MOV AL,08H
OUT 21H,AL
MOV AL,04H
OUT 21H,AL
MOV AL,01H
OUT 21H,AL
MOV AL,6FH
OUT 21H,AL
MOV AL,11H
OUT 0A0H,AL
MOV AL,30H
OUT 0A1H,AL
MOV AL,02H
OUT 0A1H,AL
MOV AL,01H
OUT 0A1H,AL
MOV AL,0FFH
OUT 0A1H,AL
RET
DSPY: PUSH AX
MOV AX,0001
INT 10H
POP AX
MOV CL,04
MOV DL,AL
SHR AL,CL
CMP AL,09
JNA DLAY1
ADD AL,07
NOP
DLAY1: ADD AL,30H
MOV AH,01
INT 10H
AND DL,0FH
CMP DL,09
JNA DLAY2
ADD DL,07
DLAY2: ADD DL,30H
MOV AL,DL
MOV AH,01
INT 10H
RET
DELAY1:PUSH CX
MOV CX,0FFFFH
DEL1: PUSH AX
POP AX
LOOP DEL1
POP CX
RET
DELAY2:PUSH CX
PUSH BX
MOV BX,300
CZ: MOV CX,0FFFFH
DEL2: PUSH AX
POP AX
LOOP DEL2
DEC BX
JZ CZ
POP CX
POP BX
RET
CODE ENDS
END START