# Graph Theory

# 图的定义

图 $G$ 由一个三元组确定，即 $G = \langle V(G), E(G), \varphi_G \rangle$，其中 $V$ 是顶点集，$E$ 是边集，$\varphi_G$ 是从边集 $E$ 到顶点对（无序偶或有序偶）集合上的函数。对于无向图，$\varphi_G$ 是无序偶函数，对于有向图，$\varphi_G$ 是有序偶函数。

# 基本概念

-   **无向图**: 边没有方向的图。
-   **有向图**: 边有方向的图。
-   **邻接边**: 连接同一对顶点的边。
-   **环**: 连同一个顶点的边 $(v,v)$ 或 $\langle v,v \rangle$。
-   **孤立顶点**: 没有边与之关联的顶点。
-   **零图**: 只有顶点没有边的图。
-   **平凡图**: 只有一个顶点且没有边的图。
-   **$n$ 阶图**: 有 $n$ 个顶点的图。
-   **简单图**: 没有自环和重边的图。
-   **多重图**: 允许有重边的图。
-   **平行边、平行弧**: 连接相同一对顶点的多条边或弧。
-   **完全图**: 任意两个不同的顶点之间都有一条边的图。
-   **度数**:
    -   **出度**: 有向图中，从某顶点出发的边的数目。
    -   **入度**: 有向图中，进入某顶点的边的数目。
-   **握手定理**: 无向图中所有顶点的度数之和等于边数的两倍。即 $\sum_{v \in V} \deg(v) = 2|E|$。
-   **度数序列**: 顶点的度数按大小排序后得到的序列。
-   **子图**:
    -   **真子图**: 原图的子图，但不包含所有的顶点和边。
    -   **生成子图**: 包含原图的所有顶点的子图。
    -   **$V$ 导出子图**: 由 $V$ 的顶点集导出的子图，包含所有由 $V$ 中顶点作为端点的边。
    -   **$E$ 导出子图**: 由 $E$ 的边集导出的子图，包含所有 $E$ 中边的顶点。
-   **补图**: 由完全图中减去原图的边所得的图。
-   **图的同构**: 两个图是同构的如果存在一个双射使得一种图的边结构保留在另一种图中。
    -   **必要不充分条件**: 顶点数、边数相同，度数序列相同。
-   **自补图**: 图的补图和原图同构。

# 通路和回路

-   **通路**: 顶点 $v$ 到 $u$ 之间的路径。
-   **通路的长度**: 通路中边的数目。
-   **简单路径**: 路径中顶点可以重复，但边不能重复。
-   **基本路径**: 路径中顶点不能重复。
-   **回路**: 起点和终点相同的路径。
-   **简单回路**: 边不重复的回路。
-   **基本回路**: 顶点不重复的回路。
-   **复杂路径**: 路径中顶点或边重复。
-   **连通**: 两个顶点之间存在通路。
-   **连通分支**: 图的导出子图，是该图的一个连通部分。
-   **点割集**: 最少删掉这些点后使得图变得不连通。
-   **边割集**: 最少删掉这些边后使得图变得不连通。
-   **短程线**: 两个顶点之间的最短通路。
-   **距离**: 短程线的长度。
-   **连通图**:
    -   **无向图**: 任意两个顶点连通。
    -   **弱连通图**: 有向图中，忽略方向后是连通图。
    -   **单侧连通图**: 有向图中任意两个顶点之间至少一个对另一个是可达的。
    -   **强连通图**: 有向图中任意一对顶点之间相互可达。

# 图的矩阵表示

-   **邻接矩阵**: 邻接矩阵 $A$ 的第 $i$ 行之和是顶点 $v_i$ 的出度，第 $j$ 列之和是顶点 $v_j$ 的入度。若 $A$ 是 $G$ 的邻接矩阵，则 $A^l$ 中的元素 $a_{ij}$ 表示从顶点 $v_i$ 到顶点 $v_j$ 长度为 $l$ 的通路数，对角线上的元素是长度为 $l$ 的回路数。
-   **关联矩阵** $M(G)$:
    -   关联矩阵中元素取值为 $0, 1, -1$。
    -   关联矩阵适用于无环图。
    -   $M(G)$ 中所有元素的代数和为 $0$。
-   **可达矩阵**: 表示图中各顶点之间的可达关系。

# 欧拉图

## 定义

**欧拉图（Eulerian Graph）** 是包含欧拉回路（Eulerian Circuit）或欧拉路径（Eulerian Path）的图。

-   **欧拉回路**: 经过图中每条边一次且仅一次的回路，并且起点和终点相同。
-   **欧拉路径**: 经过图中每条边一次且仅一次的路径，起点和终点可以不同。

### 形式定义

-   图 $G = \langle V, E \rangle$ 包含欧拉回路，当且仅当存在一个顶点序列 $v_0, v_1, \ldots, v_{n-1}, v_n = v_0$，使得每两个连续顶点之间存在边，并且每条边恰好经过一次。
-   图 $G = \langle V, E \rangle$ 包含欧拉路径，当且仅当存在一个顶点序列 $v_0, v_1, \ldots, v_{n-1}$，使得每两个连续顶点之间存在边，并且每条边恰好经过一次。

## 判定条件

### 无向图的判定

1. **欧拉回路**: 一个连通无向图 $G$ 是欧拉图当且仅当所有顶点的度数均为偶数。
2. **欧拉路径**: 一个连通无向图 $G$ 包含欧拉路径当且仅当恰有两个顶点的度数为奇数（起点和终点）。

### 有向图的判定

1. **欧拉回路**: 一个连通有向图 $G$ 是欧拉图当且仅当所有顶点的入度和出度相等。
2. **欧拉路径**: 一个连通有向图 $G$ 包含欧拉路径当且仅当恰有一个顶点的出度比入度大 1（起点），恰有一个顶点的入度比出度大 1（终点）。

## 欧拉图的性质

-   **连通性**: 必须是连通的（无向图）或强连通的（有向图）。
-   **边覆盖**: 所有边必须被路径或回路覆盖一次。
-   **边数和度数**: 对于无向图，所有顶点的度数为偶数。对于有向图，所有顶点的入度和出度相等。
-   **唯一性**: 欧拉回路不一定是唯一的，但满足条件的路径或回路必须存在。

## 欧拉图的构造

### 欧拉回路的存在

若 $G$ 是一个连通无向图，且所有顶点的度数均为偶数，则 $G$ 包含欧拉回路。

### 欧拉路径的存在

若 $G$ 是一个连通无向图，且恰有两个顶点的度数为奇数，则 $G$ 包含欧拉路径。

# 哈密顿图

## 定义

**哈密顿图（Hamiltonian Graph）** 是包含哈密顿回路（Hamiltonian Circuit）或哈密顿路径（Hamiltonian Path）的图。

-   **哈密顿回路**: 一条回路，经过图中的每个顶点一次且仅一次，并且起点和终点相同。
-   **哈密顿路径**: 一条路径，经过图中的每个顶点一次且仅一次，起点和终点可以不同。

### 形式定义

-   图 $G = \langle V, E \rangle$ 包含哈密顿回路，当且仅当存在一个顶点序列 $v_0, v_1, \ldots, v_{n-1}, v_n = v_0$，使得每两个连续顶点之间存在边，并且序列中的每个顶点都是 $G$ 中的顶点。
-   图 $G = \langle V, E \rangle$ 包含哈密顿路径，当且仅当存在一个顶点序列 $v_0, v_1, \ldots, v_{n-1}$，使得每两个连续顶点之间存在边，并且序列中的每个顶点都是 $G$ 中的顶点。

## 判定条件

### Dirac 定理

如果一个 $n$ 阶简单图 $G$ 中每个顶点的度数 $\deg(v) \geq \frac{n}{2}$，则 $G$ 是哈密顿图。

### Ore 定理

如果一个 $n$ 阶简单图 $G$ 中，任意两个不相邻顶点 $u$ 和 $v$ 满足 $\deg(u) + \deg(v) \geq n$，则 $G$ 是哈密顿图。

### Bondy-Chvátal 定理

设 $G$ 是一个 $n$ 阶简单图，如果对于 $G$ 中任意两个不相邻顶点 $u$ 和 $v$，当 $\deg(u) + \deg(v) \geq n$ 时，将 $u$ 和 $v$ 连接，结果图是哈密顿图，则 $G$ 也是哈密顿图。

### Chvátal-Erdős 定理

设 $G$ 是一个 $n$ 阶简单图，顶点的度数序列为 $d_1 \leq d_2 \leq \cdots \leq d_n$。如果对于每个 $k < \frac{n}{2}$，$d_k \leq k$ 或 $d_{n-k} \geq n - k$，则 $G$ 是哈密顿图。

## 哈密顿回路的性质

-   **唯一性**: 有些图可能有多个哈密顿回路，而有些图可能只有一个哈密顿回路。
-   **必要性**: 图中存在哈密顿回路的必要条件是每个顶点的度数至少为 2，但这是一个非常弱的条件。
-   **图的变换**: 在一定条件下，图的顶点或边的添加可能会使图成为哈密顿图。

## 哈密顿图的构造

### 哈密顿回路的存在

若 $G$ 是一个 $n$ 阶简单图，且 $G$ 满足 Dirac 定理或 Ore 定理，则 $G$ 是哈密顿图。

### 哈密顿路径的存在

对于一个具有 $n$ 个顶点的图 $G$，若 $G$ 包含哈密顿路径 $P$，则 $G$ 的哈密顿路径可以通过连接路径 $P$ 的起点和终点来生成哈密顿回路。

# 平面图

## 定义

平面图（Planar Graph）是一种可以在平面上绘制的图，绘制时边不相交，除了在顶点处相交。

### 形式定义

-   一个图是平面图，如果它可以嵌入平面，即存在一个平面图的嵌入，使得图的所有边仅在其端点相交，不存在边的交叉。
-   也可以说，一个图是平面图，如果可以找到一种方式将其画在平面上，使得其边仅在顶点处相交。

## 基本概念

-   **面（Face）**: 平面图被边分割成的区域，每个区域包括一个外部区域（无限大）和若干内部区域（有限大小）。
-   **平面图的嵌入**: 将平面图绘制到平面上，使得边仅在顶点处相交的绘制方法。
-   **度数**:
    -   **面度**: 面的度数是围成该面的边的数目。
    -   **顶点度**: 顶点的度数是连接该顶点的边的数目。

## 欧拉公式

对于一个连通平面图，顶点数 $V$、边数 $E$ 和面的数目 $F$ 之间的关系为：

$$ V - E + F = 2 $$

### 推导

-   通过添加和删除边，可以将任意平面图简化为一个树，最终通过不断删除叶子节点，可以推导出欧拉公式。

### 应用

-   检查一个给定图是否为平面图。
-   计算一个平面图中任意两个参数（顶点数、边数、面数）中的一个。

## 平面图的判定

### 库拉托夫斯基定理

一个图是平面图，当且仅当它不包含 $K_5$ 或 $K_{3,3}$ 的子图（即它没有 $K_5$ 或 $K_{3,3}$ 的**任意**子图）。

-   $K_5$: 完全图，有 5 个顶点，每两个顶点之间都有一条边。
-   $K_{3,3}$: 完全二分图，两个顶点集各有 3 个顶点，每个顶点集的顶点与另一个顶点集的每个顶点都有一条边。

### 笛多德法则

一个简单平面图，如果 $E \leq 3V - 6$，则它是平面图。

-   对于无三角形（面数均大于 3）的简单平面图，如果 $E \leq 2V - 4$，则它是平面图。

# 树

-   **树**: 一个连通无回路的图称为树。
-   **树叶**: 度数为 1 的顶点。
-   **分支点、内点**: 度数大于 1 的顶点。
-   **森林**: 一个无向图的连通分支都是树，则称该无向图为森林，树是森林的连通分支。
-   **平凡树**: 只有一个顶点的树。
-   **树的定义**:
    -   图无回路且边数 $e = v - 1$。
    -   图是连通的且边数 $e = v - 1$。
    -   图无简单回路，增加任一条新边会产生且仅产生一个回路。
    -   图是连通的但删去任意一条边就不连通。
    -   对任意一对节点有且只有一条路径连接（没有回路）。
-   **定理**:
    -   节点数大于 1 的非平凡树 $T$ 至少有两个树叶（可用握手定理和树的定义证明）。
-   **生成树**: 如果图 $G$ 的生成子图是一棵树，则这棵树称为 $G$ 的生成树 $T$。

# 图的常用算法

## 广度优先搜索 (BFS)

-   **用途**: 用于图的遍历、最短路径查找。
-   **步骤**:
    1. 从起始顶点开始，访问所有邻接顶点。
    2. 依次访问这些邻接顶点的未访问邻接顶点。
    3. 重复上述过程，直至所有顶点都被访问。
-   **应用**: 可以用于查找无权图中的最短路径。

## 深度优先搜索 (DFS)

-   **用途**: 用于图的遍历、连通分支查找。
-   **步骤**:
    1. 从起始顶点开始，沿着一条路径深入访问，直至到达一个没有未访问邻接顶点的顶点。
    2. 回溯到上一个顶点并继续访问其他未访问邻接顶点。
    3. 重复上述过程，直至所有顶点都被访问。
-   **应用**: 可以用于检测图中的环、连通分支。

## Dijkstra 算法

-   **用途**: 用于加权图中查找单源最短路径（非负权值）。
-   **步骤**:
    1. 初始化距离数组，起始顶点的距离设为 0，其他顶点距离设为 $\infty$。
    2. 将所有顶点标记为未访问，选择起始顶点。
    3. 对于当前顶点，检查所有未访问邻接顶点，更新其距离。
    4. 标记当前顶点为已访问，选择未访问顶点中距离最小的顶点作为新的当前顶点。
    5. 重复步骤 3 和 4，直到所有顶点都被访问。
-   **应用**: 查找无负权图中的最短路径。

## Prim 算法

-   **用途**: 用于查找无向图中的最小生成树（Minimum Spanning Tree, MST）。
-   **步骤**:
    1. 初始化 MST 集合为空，选择任一顶点作为起始点。
    2. 将所有与起始点相连的边加入到候选边集合中。
    3. 从候选边集合中选择权重最小的边，若该边的加入不会形成环，则将该边加入到 MST 中。
    4. 更新候选边集合，包括新加入顶点的所有连接边。
    5. 重复步骤 3 和 4，直到 MST 中包含了所有顶点。
-   **应用**: 适用于图的最小生成树的构建。

## Kruskal 算法

-   **用途**: 用于查找无向图中的最小生成树。
-   **步骤**:
    1. 将所有边按权重升序排序。
    2. 初始化 MST 集合为空，图的所有顶点作为独立的集合。
    3. 依次检查每条边，如果该边的两个顶点属于不同的集合，则将该边加入到 MST 中，并合并这两个集合。
    4. 重复步骤 3，直到 MST 包含了所有顶点（即边数为 $|V| - 1$）。
-   **应用**: 适用于图的最小生成树的构建。

# 有向树

## 定义

有向树是一种有向无环图（DAG），其中存在一个根顶点 $r$，使得从 $r$ 出发有且仅有一条路径可以到达每个其他顶点。形式上，有向树可以表示为 $T = \langle V, E \rangle$，其中：

-   $V$ 是顶点集。
-   $E$ 是边集，边的方向表示从父节点到子节点的关系。

## 基本概念

-   **根**: 有向树中唯一一个没有入边的顶点，通常记为 $r$。
-   **叶子**: 没有出边的顶点。
-   **内节点**: 有至少一个子节点的顶点。
-   **深度**: 根节点到某个节点的路径长度。
-   **高度**: 有向树中节点的最大深度。
-   **父节点**: 对于边 $(u, v)$，$u$ 是 $v$ 的父节点。
-   **子节点**: 对于边 $(u, v)$，$v$ 是 $u$ 的子节点。
-   **兄弟节点**: 具有相同父节点的节点。
-   **祖先**: 一个节点到根的路径上的所有节点。
-   **后代**: 从一个节点出发到其子节点的所有路径上的节点。
-   **分支**: 从一个节点出发到其子节点的所有路径构成的子树。s

# 最优树与哈夫曼树

## 最优树

### 定义

最优树是指在满足某些约束条件下，使某些性能指标（如路径长度、传输时间、代价等）最小化的树。通常用于优化问题中，构造出最优的结构或解决方案。

### 应用场景

-   **通信网络设计**: 最优树可以用于设计通信网络中的最短路径或最小费用路径。
-   **数据压缩**: 最优树用于构造最优编码树，以实现数据的有效压缩。

### 特点

-   **最短路径树**: 从根节点到每个其他节点的路径长度之和最小。
-   **最小生成树**: 边的总权重最小的树结构，但通常用于无向图。
-   **代价最小化**: 对于某些特定问题，如传输时间、带宽消耗等，构造出代价最小的树。

## 哈夫曼树

### 定义

哈夫曼树（Huffman Tree）是一种最优二叉树，用于构建哈夫曼编码。它是根据给定符号的频率（或权重）构建的最优树，目的是使编码后的平均码长最小。

### 构造过程

1. **初始化**: 将每个符号的权重作为一个单独的节点，构成一个森林。
2. **选择最小权重的两个节点**: 从森林中选择权重最小的两个节点。
3. **合并节点**: 创建一个新节点，该节点的权重是这两个最小节点权重之和，新节点作为这两个节点的父节点。
4. **重复**: 将新节点加入森林，重复步骤 2 和 3，直到森林中只有一个节点为止，该节点即为哈夫曼树的根节点。

### 特点

-   **最优编码**: 哈夫曼编码是一种前缀编码，即任何一个符号的编码不是其他任何符号的前缀。
-   **二叉树结构**: 哈夫曼树是一棵二叉树，每个节点代表一个符号或合并的符号集。
-   **自底向上构建**: 哈夫曼树是通过合并最小权重节点逐步构建而成的。

### 哈夫曼编码

1. **从哈夫曼树生成编码**: 从根节点出发，左分支编码为“0”，右分支编码为“1”。
2. **遍历树**: 对每个符号，遍历哈夫曼树生成其编码。
